<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <meta name="description" content="Wyam is a simple to use, highly modular, and extremely configurable static content generator." />
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <title>Wyam - Custom Document Types</title>
        <link href="/Content/bootstrap-less/bootstrap.css" rel="stylesheet" />
        <link href="/Content/adminlte/AdminLTE.css" rel="stylesheet" />
        <link href="/Content/adminlte/skins/wyam.css" rel="stylesheet" />
        <link href="/Content/prettify.css" rel="stylesheet">
        <link href="/Content/github.css" rel="stylesheet">
        <link href="/Content/master.css" rel="stylesheet" />
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <script src="/Scripts/jQuery-2.1.4.min.js"></script>
        <script src="/Scripts/bootstrap.min.js"></script>        
        <script src="/Scripts/app.min.js"></script>         
        <script src="/Scripts/prettify.js"></script>   
        <script src="/Scripts/jquery.slimscroll.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/Scripts/html5shiv.min.js"></script>
        <script src="/Scripts/respond.min.js"></script>
        <![endif]-->  
    </head>

    <body class="hold-transition wyam layout-boxed  " onload="prettyPrint()">    
        <div class="top-banner"></div>
        <div class="wrapper">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/" class="logo">
                    <!-- mini logo for sidebar mini 50x50 pixels -->
                    <span class="logo-mini"><img src="/Content/images/nav-logo.png"></span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-lg"><img src="/Content/images/nav-logo.png"></span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/getting-started">Getting Started</a></li>
                                    <li><a href="/modules">Modules</a></li>
                                    <li><a href="/api">API</a></li>
                                    <li class="active"><a href="/knowledgebase">Knowledgebase</a></li>
                                    <li><a href="/community">Community</a></li>

                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                    
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="sidebar smaller">                    
                    
                    <!-- search form -->
                    
                    
                    <!-- sidebar menu: : style can be found in sidebar.less -->
                    <ul class="sidebar-menu">
                        
	
				<li>
				<a href="/knowledgebase/continuous-integration">
					Continuous Integration
				</a>
			</li>
			<li class="active">
				<a href="/knowledgebase/custom_document_types">
					Custom Document Types
				</a>
			</li>
			<li>
				<a href="/knowledgebase/embedded-use">
					Embedded Use
				</a>
			</li>
			<li>
				<a href="/knowledgebase/how-to-set-the-currentculture">
					How To Set The CurrentCulture
				</a>
			</li>
			<li>
				<a href="/knowledgebase/rss-and-atom-feeds">
					RSS and Atom Feeds
				</a>
			</li>
			<li>
				<a href="/knowledgebase/some-background">
					Some Background
				</a>
			</li>
			<li>
				<a href="/knowledgebase/static-site-resources">
					Static Site Resources
				</a>
			</li>
			<li>
				<a href="/knowledgebase/writing-a-module">
					Writing a Module
				</a>
			</li>



                    </ul>
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                


	<section class="content-header">
		<h1>Custom Document Types</h1>
	</section>
	<section class="content">
		


<p>The default <code>IDocument</code> implementation that gets passed through the pipeline exposes the document metadata as well as some default properties like <code>IDocument.Source</code>. However, there may be times that it would be handy to give your document some smarts and introduce extra properties and methods. It's easy to make your own document type and tell the engine to use it instead of the default.</p>
<h1>The Easy Way</h1>
<p>The easiest way to do this is to use the built-in helpers for custom document types. This starts with the <code>CustomDocument</code> base class. Simple derive a new document class from <code>CustomDocument</code> in the <a href="/getting-started/configuration#declarations">declarations part</a> of your configuration file. The base class implements <code>IDocument</code> so you will have access to all the metadata that you normally would from the default implementation. This allows you to &quot;wrap&quot; metadata getters and setters with your own special logic. You can also add any additional properties and methods that you need to.</p>
<p>The only thing that you should keep in mind is that you may need to implement the <code>CustomDocument.Clone()</code> method (its declared as <code>protected virtual</code>). The default implementation performs an <code>object.MemberwiseClone()</code> to get a new instance of your custom document class when needed. However, if you have any special cloning requirements (for example, your document class should be deep-cloned), you will need to override this method and implement it yourself. The only requirement is that it must return a new instance of your document class.</p>
<p>Once you've created your <code>CustomDocument</code> class, you need to tell the engine to use it instead of the default <code>IDocument</code> implementation. This can be done using the <code>SetCustomDocumentType&lt;T&gt;()</code> method in the <a href="/getting-started/configuration#body">main body</a> of your configuration file. Just use your document type as the generic parameter and everything else will be rigged up for you.</p>
<p>Here is an example:</p>
<pre class="prettyprint"><code>public class MyDocument : CustomDocument
{
    // Gets the value from metadata and converts it to lowercase
    public string LowercaseTitle
    {
        get { return String(&quot;Title&quot;).ToLower(); }
    }
    
    // Stores a value directly in the new document type
    public DateTime Published { get; set; }
    
    protected override CustomDocument Clone()
    {
        return new MyDocument
        {
            // The metadata will be automatically cloned for you,
            // all you have to do is clone any additional properties
            Published = Published
        };
    }
}

---
SetCustomDocumentType&lt;MyDocument&gt;();

Pipelines.Add(&quot;Posts&quot;,
    ReadFiles(&#64;&quot;posts\*.md&quot;),  // Read all markdown files in the &quot;posts&quot; directory
    FrontMatter(Yaml()),  // Load any frontmatter and parse it as YAML markup
    Trace(((MyDocument)&#64;doc).LowercaseTitle)  // Cast the document to the custom type and trace the LowercaseTitle property
);
</code></pre>
<h1>More Advanced</h1>
<p>Under the hood, Wyam actually has a very flexible architecture that gives you full control over document types and construction. The approach above is designed to abstract most of this, but you can go deeper for a more custom implementation. Specifically, all your custom document type has to do is implement <code>IDocument</code>. This interface requires several document properties (such as <code>IDocument.Source</code>) as well as a corresponding implementation of <code>IMetadata</code>. How you implement these interfaces is totally up to you. The <code>CustomDocument</code> base class above is really just a thin wrapper around the underlying default implementation of <code>IDocument</code> and simply delegates the interface implementation to the wrapped document.</p>
<p>Once you have your fully customized <code>IDocument</code> implementation, you also need to implement <code>IDocumentFactory</code> which tells the engine how to create new instances of your custom document class. Again, the simple approach above actually uses a special factory designed specifically for <code>CustomDocument</code> classes which is swapped in during the call to <code>SetCustomDocumentType&lt;T&gt;()</code>. When you create your own factory, you'll need to replace it in the engine by setting <code>Engine.DocumentFactory</code> in the <a href="/getting-started/configuration#body">main body</a> of your configuration file.</p>
<p>For more information on the API classes used in fully custom document type scenarios, see <a href="/api">the API documentation</a>.</p>


	</section>
                
            </div>
            
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer"><small>Wyam is crafted by <a href="http://www.daveaglick.com">Dave Glick</a> and <a href="https://github.com/Wyamio/Wyam/graphs/contributors">other awesome contributors</a>. <a href="https://github.com/Wyamio/Wyam">Code on GitHub</a>. This site was entirely generated by Wyam. Check out <a href="https://github.com/Wyamio/Wyam.Web">the site code on GitHub</a>.</small></footer>
        </div>
        <div class="github-button">
            <a href="https://github.com/Wyamio/Wyam"><i class="fa fa-github"></i> GitHub</a>
        </div>
        <script>
            ((window.gitter = {}).chat = {}).options = {
                room: 'wyamio/wyam'
            };
        </script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
        <script>            
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');            
            ga('create', 'UA-54470483-4', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>